<!DOCTYPE html>
<html lang="" xml:lang="">
  <head>
    <title>MSE Tools  US Overview</title>
    <meta charset="utf-8" />
    <meta name="author" content="Sarah Gaichas, Presenter   Contributors: Robert Ahrens, Jon Deroba, Katherine Doering, Sarah Gaichas,  Kristin Marshall, Cassidy Peterson, Desiree Tommasi, Ben Williams" />
    <script src="libs/header-attrs/header-attrs.js"></script>
    <link href="libs/remark-css/default.css" rel="stylesheet" />
    <link rel="stylesheet" href="libs/EDAB_theme3_508_SOE_16by9.css" type="text/css" />
  </head>
  <body>
    <textarea id="source">
class: right, middle, my-title, title-slide

.title[
# MSE Tools <br />US Overview
]
.subtitle[
## ICES WKMSEDEV<br /> 26 September 2023
]
.author[
### Sarah Gaichas, Presenter<br /><br /><br />Contributors: Robert Ahrens, Jon Deroba, Katherine Doering, Sarah Gaichas, <br />Kristin Marshall, Cassidy Peterson, Desiree Tommasi, Ben Williams
]

---

class: top, left






# US MSE Tools Overview

.pull-left-40[  
## NOAA MSE Working group

*  Who
*  What
*  When
*  How
*  Why

]

.pull-right-60[
![xkcd comic 1328 titled Update](https://imgs.xkcd.com/comics/update.png)

.right[.contrib[https://xkcd.com/1328]]
]

*NOAA Fisheries Integrated Toolbox*: presentation by Katherine Doering: &lt;kathryn.doering@noaa.gov&gt;

???
Everyone loves an update

---
background-image: url(https://github.com/NOAA-EDAB/presentations/raw/master/docs/EDAB_images/NOAAecowatchregionsmap.png)
background-size: 700px
background-position: right

# Questions

.pull-left-40[

1. Name of MSE/MSE topic

2. Multiple choice: Is the software used

    + custom built for the project,

    + directly or modified from an existing toolbox, or

    + a combination?

3. Coding environment (ADMB, TMB, R, FORTRAN, C++, other?)

4. Link to code or toolbox, if possible, or provide a contact for the tool/code

]

.pull-right-60[

.footnote[
Map from [NOAA Ecowatch website](https://ecowatch.noaa.gov/regions)
]

]

---
# Alaska: Ben Williams

.pull-left[

Most involved using CEATTLE (ADMB) or RCEATTLE (R/TMB). Minimal MSE uses of these models to date; they have been focused on multi-species and climate-informed assessments. 

Rceattle https://github.com/grantdadams/Rceattle

A spatial framework that is centered around sablefish in Alaska (R/TMB) is setup to be used in an MSE framework. We are currently generalizing this model to explore the HCR for sablefish and other fisheries - and looking for a postdoc(s).

Spatial sablefish https://github.com/Craig44/SpatialSablefishAssessment 
]

.pull-right[
![AK map NOAA Ecowatch](https://ecowatch.noaa.gov/sites/default/files/2022-10/alaska-blue-map.jpg)

.contrib[
Map from [NOAA Ecowatch](https://ecowatch.noaa.gov/regions/alaska)
]

Contact: &lt;ben.williams@noaa.gov&gt;

]

???
There are a few structural differences between these models, but they are quite similar. 
Additionally, getting a model with the diet data etc. to converge is a challenge in and of itself, though both models can be used in a MSE framework.


---
# Hawaii-Western Pacific: Rob Ahrens

.pull-left[

1. MSE for priority species identified in the Jurisdictional Coral Reef Fishery Management Plan for Department of Aquatic and Wildlife Resources in Guam. These are MSEs for data limited species. 

2. The process mainly uses the LBSPR  package Hordyk A (2021). LBSPR: Length-Based Spawning Potential Ratio. R package version 0.1.6,&lt;https://CRAN.R-project.org/package=LBSPR&gt;.

3. Coding environment is R

4. Not currently available 



]

.pull-right[
![Hawaii map NOAA Ecowatch](https://ecowatch.noaa.gov/sites/default/files/2022-10/pacific-islands-blue-map.jpg)
.contrib[
Map from [NOAA Ecowatch](https://ecowatch.noaa.gov/regions/pacific-islands)
]

Contact: &lt;robert.ahrens@noaa.gov&gt; 
]


---
# Northwest: Kristin Marshall

.pull-left-60[

[*Hake MSE*](https://repository.library.noaa.gov/view/noaa/30919#:~:text=The%20Pacific%20hake%20(Merluccius%20productus,developed%20to%20explore%20key%20uncertainties.) climate-robustness testing of HCRs to changes and variability in recruitment, growth, and distribution. Developing and testing one year ahead recruitment forecasts using predictors from ROMS, and larval and juvenile survey data. Long-term projections developed from ROMS variables will inform future recruitment scenarios. 
https://github.com/pacific-hake/pacifichakemse

*Sablefish MSE* consequences of spatial vs non-spatial assessments for the performance of the fishery in all regions

https://www.pacificsablefishscience.org/2021-mse-workshop 

SS3MSE by Kathryn Doering et al: https://nmfs-fish-tools.github.io/SSMSE/

Atlantis work by Kaplan et al https://www.frontiersin.org/articles/10.3389/fmars.2020.00652/full

]

.pull-right-40[
![Pac map NOAA Ecowatch](https://ecowatch.noaa.gov/sites/default/files/2022-10/california-current-blue-map-v2.jpg)
.contrib[
Map from [NOAA Ecowatch](https://ecowatch.noaa.gov/regions/california-current)
]

Contact: &lt;kristin.marshall@noaa.gov&gt;
]

---
# Southwest: Desiree Tommasi

.pull-left[

*North Pacific albacore tuna MSE* (completed)

The software used is custom built but relies on SS operating/estimating models executed in R (with SS models and also a C++ projection code)

Code is not in a public repository, but please contact Desiree if interested. [Report overview of framework and output.](https://isc.fra.go.jp/pdf/ISC21/ISC21_ANNEX11_Report_of_the_North_Pacific_ALBACORE_MSE.pdf)

*North Pacific bluefin tuna MSE* (in progress)

The software used is custom built but relies on SS operating/estimating models (builds on albacore MSE code) executed in R (with SS models)

Preliminary code: https://github.com/detommas/PBF_MSE

]

.pull-right[

*Pacific sardine MSE* (completed)

SSMSE R package with custom HCRs and recruitment variability scenarios executed in R (with SS models)

Code: https://github.com/detommas/PBF_MSE and paper (Wildermuth et al.) accepted in CJFAS

*Swordfish  MSE* (completed) MSE evaluated different types of closure; feedback was on fisher behaviour rather than the population as the US catch is a minor fraction of total catch for this species

Custom built tools in R

See Smith et al. 2023:  
https://www.frontiersin.org/articles/10.3389/fmars.2021.630607/full  

Contact: &lt;desiree.tommasi@noaa.gov&gt;

]

???

Let me know if you need anything else. In terms of discussions, I would be particularly interested in the "how to reduce run times" one (for the albacore MSE we only could run a few uncertainty scenarios for the full, i.e. with assessment, MSE). With PBF we had 100+ HCRs to test and so decided to run a quick "perfect info" MSE (i.e. no assessment) and managers were able to trim the HCRs down to 12 looking at those preliminary results. In November we are meeting to decide on the final uncertainty grid and so it would be great to hear what ICES has been up to on this topic. In terms of presentation of results, I would be interested in hearing if ICES MSEs present results across a reference set of scenarios plus the robustness ones separately, and for the former, if each of the potential OMs is given equal weight.



---
# Southeast: Cassidy Peterson

.pull-left-60[
(Gulf) Red snapper in GOMex (Yuying Zhang): http://gomredsnappermsetool.fiu.edu/

(South Atlantic) in progress dolphin MSE; TMB &amp; R; spatial and seasonal length-based model
Adapted from custom-built MSE for black sea bass and cobia comparing MP performance wrt comm v. rec mgmt objectives (Matt Damiano &amp; Jie Cao)

SS3-based custom examples: https://github.com/CassidyPeterson-NOAA/SS_MSE; https://github.com/CassidyPeterson-NOAA/SS_MSE_AssessmentFrequency 

*Open MSE-BAM* presentation by Cassidy

]

.pull-right-40[
![SE map NOAA Ecowatch](https://ecowatch.noaa.gov/sites/default/files/2022-10/southeast-us-blue-map.jpg)
.contrib[
Map from [NOAA Ecowatch](https://ecowatch.noaa.gov/regions/gulf-of-mexico)
]

Contact: &lt;cassidy.peterson@noaa.gov&gt;

]

Oshima, Megumi C., "A Management Strategy Evaluation of the Impacts of Interspecific Competition and Recreational Fishery Dynamics on Vermilion Snapper (*Rhomboplites aurorubens*) in the Gulf of Mexico" (2020). Dissertations. 1833. https://aquila.usm.edu/dissertations/1833

---
# Northeast: Jon Deroba, Sarah Gaichas

.pull-left-60[

Woods Hole Assessment Model (WHAM) state space R/TMB framework with single species, single area MSE capabilities: 
+  WHAM MSE https://timjmiller.github.io/wham/articles/ex10_simulation.html 

Summer Flounder recreational discards MSE combined two custom built models: 
+  Sinatra (Fay), FORTRAN population dynamics and 
+  Recreational Demand angler welfare model (Carr-Harris), R
+  Framework in use for new management driven MSE
https://github.com/gavinfay/fluke-mafmc-recdisc  

WHAM simulations of "Plan B" assessment methods: https://cdnsciencepub.com/doi/full/10.1139/cjfas-2022-0045

]

.pull-right-40[
![NE map NOAA Ecowatch](https://ecowatch.noaa.gov/sites/default/files/2022-10/northeast-us-blue-map.jpg)
.contrib[
Map from [NOAA Ecowatch](https://ecowatch.noaa.gov/regions/northeast)
]

Contacts: &lt;jonathan.deroba@noaa.gov&gt;, &lt;sarah.gaichas@noaa.gov&gt;
]

*Spatial MSE tool SPASAM*: presentation by Jon. 
*EBFM MSE by Fay et al*: presentation under multispecies OMs


???

    </textarea>
<style data-target="print-only">@media screen {.remark-slide-container{display:block;}.remark-slide-scaler{box-shadow:none;}}</style>
<script src="https://remarkjs.com/downloads/remark-latest.min.js"></script>
<script src="libs/macros.js"></script>
<script>var slideshow = remark.create({
"ratio": "16:9",
"highlightStyle": "githubp",
"highlightLines": true,
"countIncrementalSlides": false
});
if (window.HTMLWidgets) slideshow.on('afterShowSlide', function (slide) {
  window.dispatchEvent(new Event('resize'));
});
(function(d) {
  var s = d.createElement("style"), r = d.querySelector(".remark-slide-scaler");
  if (!r) return;
  s.type = "text/css"; s.innerHTML = "@page {size: " + r.style.width + " " + r.style.height +"; }";
  d.head.appendChild(s);
})(document);

(function(d) {
  var el = d.getElementsByClassName("remark-slides-area");
  if (!el) return;
  var slide, slides = slideshow.getSlides(), els = el[0].children;
  for (var i = 1; i < slides.length; i++) {
    slide = slides[i];
    if (slide.properties.continued === "true" || slide.properties.count === "false") {
      els[i - 1].className += ' has-continuation';
    }
  }
  var s = d.createElement("style");
  s.type = "text/css"; s.innerHTML = "@media print { .has-continuation { display: none; } }";
  d.head.appendChild(s);
})(document);
// delete the temporary CSS (for displaying all slides initially) when the user
// starts to view slides
(function() {
  var deleted = false;
  slideshow.on('beforeShowSlide', function(slide) {
    if (deleted) return;
    var sheets = document.styleSheets, node;
    for (var i = 0; i < sheets.length; i++) {
      node = sheets[i].ownerNode;
      if (node.dataset["target"] !== "print-only") continue;
      node.parentNode.removeChild(node);
    }
    deleted = true;
  });
})();
// add `data-at-shortcutkeys` attribute to <body> to resolve conflicts with JAWS
// screen reader (see PR #262)
(function(d) {
  let res = {};
  d.querySelectorAll('.remark-help-content table tr').forEach(tr => {
    const t = tr.querySelector('td:nth-child(2)').innerText;
    tr.querySelectorAll('td:first-child .key').forEach(key => {
      const k = key.innerText;
      if (/^[a-z]$/.test(k)) res[k] = t;  // must be a single letter (key)
    });
  });
  d.body.setAttribute('data-at-shortcutkeys', JSON.stringify(res));
})(document);
(function() {
  "use strict"
  // Replace <script> tags in slides area to make them executable
  var scripts = document.querySelectorAll(
    '.remark-slides-area .remark-slide-container script'
  );
  if (!scripts.length) return;
  for (var i = 0; i < scripts.length; i++) {
    var s = document.createElement('script');
    var code = document.createTextNode(scripts[i].textContent);
    s.appendChild(code);
    var scriptAttrs = scripts[i].attributes;
    for (var j = 0; j < scriptAttrs.length; j++) {
      s.setAttribute(scriptAttrs[j].name, scriptAttrs[j].value);
    }
    scripts[i].parentElement.replaceChild(s, scripts[i]);
  }
})();
(function() {
  var links = document.getElementsByTagName('a');
  for (var i = 0; i < links.length; i++) {
    if (/^(https?:)?\/\//.test(links[i].getAttribute('href'))) {
      links[i].target = '_blank';
    }
  }
})();
// adds .remark-code-has-line-highlighted class to <pre> parent elements
// of code chunks containing highlighted lines with class .remark-code-line-highlighted
(function(d) {
  const hlines = d.querySelectorAll('.remark-code-line-highlighted');
  const preParents = [];
  const findPreParent = function(line, p = 0) {
    if (p > 1) return null; // traverse up no further than grandparent
    const el = line.parentElement;
    return el.tagName === "PRE" ? el : findPreParent(el, ++p);
  };

  for (let line of hlines) {
    let pre = findPreParent(line);
    if (pre && !preParents.includes(pre)) preParents.push(pre);
  }
  preParents.forEach(p => p.classList.add("remark-code-has-line-highlighted"));
})(document);</script>

<script>
slideshow._releaseMath = function(el) {
  var i, text, code, codes = el.getElementsByTagName('code');
  for (i = 0; i < codes.length;) {
    code = codes[i];
    if (code.parentNode.tagName !== 'PRE' && code.childElementCount === 0) {
      text = code.textContent;
      if (/^\\\((.|\s)+\\\)$/.test(text) || /^\\\[(.|\s)+\\\]$/.test(text) ||
          /^\$\$(.|\s)+\$\$$/.test(text) ||
          /^\\begin\{([^}]+)\}(.|\s)+\\end\{[^}]+\}$/.test(text)) {
        code.outerHTML = code.innerHTML;  // remove <code></code>
        continue;
      }
    }
    i++;
  }
};
slideshow._releaseMath(document);
</script>
<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
(function () {
  var script = document.createElement('script');
  script.type = 'text/javascript';
  script.src  = 'https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML';
  if (location.protocol !== 'file:' && /^https?:/.test(script.src))
    script.src  = script.src.replace(/^https?:/, '');
  document.getElementsByTagName('head')[0].appendChild(script);
})();
</script>
  </body>
</html>
